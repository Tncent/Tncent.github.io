import{P as e,r as a,z as s,j as t,M as l,N as u,U as r,Q as o,R as n,S as i,aP as v,a1 as p}from"./index.8c222edc.js";import{C as m}from"./CoverLists.f02ddca3.js";import{P as d}from"./index.7a5ed3e2.js";import"./Grid.633dfea7.js";import"./get-slot.65c4337d.js";import"./Skeleton.2af31e85.js";import"./use-houdini.316adbdf.js";import"./Select.8d76d25a.js";const c={class:"playlists"},y={__name:"playlists",setup(y){const g=e();let h=a(g.currentRoute.value.query.keywords),C=a([]),f=a(0),j=a(30),q=a(g.currentRoute.value.query.page?Number(g.currentRoute.value.query.page):1);const b=(e,a=30,s=0,t=1e3)=>{v(e,a,s,t).then((e=>{f.value=e.result.playlistCount,C.value=[],e.result.playlists?e.result.playlists.forEach((e=>{C.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:p(e.playCount)})})):$message.error("搜索内容为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};s((()=>g.currentRoute.value),(e=>{h.value=e.query.keywords,q.value=Number(e.query.page),"s-playlists"==e.name&&b(h.value,j.value,(q.value-1)*j.value)}));const k=e=>{j.value=e,b(h.value,e,(q.value-1)*j.value)},P=e=>{g.push({path:"/search/playlists",query:{keywords:h.value,page:e}})};return t((()=>{b(h.value,j.value,(q.value-1)*j.value)})),(e,a)=>(l(),u("div",c,[r(m,{listData:o(C)},null,8,["listData"]),o(C)[0]?(l(),n(d,{key:0,totalCount:o(f),onPageSizeChange:k,onPageNumberChange:P},null,8,["totalCount"])):i("",!0)]))}};export{y as default};
