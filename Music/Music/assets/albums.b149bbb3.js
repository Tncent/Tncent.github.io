import{_ as e,P as a,r as u,j as t,z as s,M as l,N as r,U as o,Q as i,cB as m,a4 as n}from"./index.8c222edc.js";import{C as v}from"./CoverLists.f02ddca3.js";import{P as d}from"./index.7a5ed3e2.js";import"./Grid.633dfea7.js";import"./get-slot.65c4337d.js";import"./Skeleton.2af31e85.js";import"./use-houdini.316adbdf.js";import"./Select.8d76d25a.js";const p={class:"albums"},c=e({__name:"albums",setup(e){const c=a();let b=u(c.currentRoute.value.query.id),h=u([]),g=u(30),f=u(c.currentRoute.value.query.page?Number(c.currentRoute.value.query.page):1),j=u(0);const C=(e,a=30,u=0)=>{m(e,a,u).then((e=>{j.value=e.artist.albumSize,h.value=[],e.hotAlbums?e.hotAlbums.forEach((e=>{h.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:n(e.publishTime)})})):$message.error("搜索内容为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))},y=e=>{c.push({path:"/artist/albums",query:{id:b.value,page:e}})},q=e=>{g.value=e,C(b.value,e,(f.value-1)*g.value)};return t((()=>{C(b.value,g.value,(f.value-1)*g.value)})),s((()=>c.currentRoute.value),(e=>{b.value=e.query.id,f.value=Number(e.query.page),"ar-albums"==e.name&&C(b.value,g.value,(f.value-1)*g.value)})),(e,a)=>(l(),r("div",p,[o(v,{listData:i(h),listType:"album"},null,8,["listData"]),o(d,{totalCount:i(j),pageNumber:i(f),onPageSizeChange:q,onPageNumberChange:y},null,8,["totalCount","pageNumber"])]))}},[["__scopeId","data-v-ba4a229e"]]);export{c as default};
