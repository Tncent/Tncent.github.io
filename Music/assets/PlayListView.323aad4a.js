import{_ as a}from"./album.5b177070.js";import{_ as e,P as s,r as l,j as t,z as i,Q as r,M as u,N as c,O as n,U as o,aa as d,R as p,W as m,aL as v,S as g,$ as h,cu as y,cv as f,aR as b,as as k,aM as w,bB as _,X as j,Y as C,a4 as x,a5 as q,a6 as S,cb as N,by as P}from"./index.8c222edc.js";import{D as R}from"./DataLists.a1af9741.js";import{P as $}from"./index.7a5ed3e2.js";import{_ as D}from"./Space.03a5017b.js";import{_ as I}from"./Skeleton.2af31e85.js";import"./SmallSongData.246ff741.js";import"./Add.055214c0.js";import"./Select.8d76d25a.js";import"./get-slot.65c4337d.js";import"./use-houdini.316adbdf.js";const z=a=>(q("data-v-771eca22"),a=a(),S(),a),T={key:0,class:"playlist"},U={class:"left"},L={class:"cover"},M=z((()=>n("img",{src:a,class:"album",alt:"album"},null,-1))),Q={class:"intr"},V=z((()=>n("span",{class:"name"},"歌单简介",-1))),A={class:"desc text-hidden"},B={class:"right"},E={class:"meta"},J={class:"name"},O={class:"creator"},W={class:"time"},X={class:"createTime"},Y=z((()=>n("span",{class:"num"},"创建时间：",-1))),F={class:"updateTime"},G=z((()=>n("span",{class:"num"},"更新时间：",-1))),H={key:1,class:"title"},K=z((()=>n("span",{class:"key"},"未提供所需数据",-1))),Z=z((()=>n("br",null,null,-1))),aa={key:2,class:"loading"},ea={class:"left"},sa={class:"right"},la=e({__name:"PlayListView",setup(a){const e=s();let q=l(e.currentRoute.value.query.id),S=l(null),z=l([]),la=l(!1),ta=l(30),ia=l(e.currentRoute.value.query.page?Number(e.currentRoute.value.query.page):1),ra=l(0);const ua=a=>{y(a).then((a=>{a.playlist?(ra.value=a.playlist.trackCount,S.value=a.playlist):$message.error("获取歌单信息失败")}))},ca=(a,e=30,s=0)=>{f(a,e,s).then((a=>{a.songs?(z.value=[],a.songs.forEach(((a,e)=>{z.value.push({id:a.id,num:e+1+(ia.value-1)*ta.value,name:a.name,artist:a.ar,album:a.al,alia:a.alia,time:b(a.dt),fee:a.fee,pc:a.pc?a.pc:null})}))):$message.error("获取歌单内歌曲失败"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};t((()=>{q.value&&(ua(q.value),ca(q.value,ta.value,(ia.value-1)*ta.value))}));const na=a=>{ta.value=a,ca(q.value,a,(ia.value-1)*ta.value)},oa=a=>{e.push({path:"/playlist",query:{id:q.value,page:a}})};return i((()=>e.currentRoute.value),((a,e)=>{q.value=a.query.id,ia.value=Number(a.query.page),"playlist"==a.name&&(a.query.id!=e.query.id?(ua(q.value),ca(q.value,ta.value,(ia.value-1)*ta.value)):ca(q.value,ta.value,(ia.value-1)*ta.value))})),(a,s)=>{const l=k,t=w,i=N,y=_,f=P,b=D,ta=I;return r(S)?(u(),c("div",T,[n("div",U,[n("div",L,[o(l,{class:"coverImg",src:r(S).coverImgUrl?r(S).coverImgUrl.replace(/^http:/,"https:")+"?param=500y500":null,"fallback-src":"/images/pic/default.png"},null,8,["src"]),M]),n("div",Q,[V,n("span",A,d(r(S).description?r(S).description:"太懒了吧，连简介都不写"),1),r(S).description&&r(S).description.length>70?(u(),p(t,{key:0,block:"",strong:"",secondary:"",onClick:s[0]||(s[0]=a=>v(la)?la.value=!0:la=!0)},{default:m((()=>[h(" 全部简介 ")])),_:1})):g("",!0),o(y,{show:r(la),"onUpdate:show":s[1]||(s[1]=a=>v(la)?la.value=a:la=a),preset:"card",style:{width:"60vw","min-width":"min(24rem, 100vw)"},title:"歌单简介",bordered:!1},{default:m((()=>[o(i,{style:{"max-height":"60vh"}},{default:m((()=>[h(d(r(S).description),1)])),_:1})])),_:1},8,["show"])]),r(S).tags?(u(),p(b,{key:0,class:"tag"},{default:m((()=>[(u(!0),c(j,null,C(r(S).tags,(a=>(u(),p(f,{class:"tags",size:"large",round:"",bordered:!1,key:a,onClick:s=>r(e).push(`/discover/playlists?cat=${a}`)},{default:m((()=>[h(d(a),1)])),_:2},1032,["onClick"])))),128))])),_:1})):g("",!0)]),n("div",B,[n("div",E,[n("span",J,d(r(S).name),1),n("span",O,d(r(S).creator.nickname),1),n("div",W,[n("div",X,[Y,h(" "+d(r(x)(r(S).createTime)),1)]),n("div",F,[G,h(" "+d(r(x)(r(S).updateTime)),1)])])]),o(R,{listData:r(z)},null,8,["listData"]),o($,{totalCount:r(ra),pageNumber:r(ia),showSizePicker:!1,showQuickJumper:!1,onPageSizeChange:na,onPageNumberChange:oa},null,8,["totalCount","pageNumber"])])])):r(q)?(u(),c("div",aa,[n("div",ea,[o(ta,{class:"pic"}),o(ta,{text:"",repeat:5}),o(ta,{text:"",style:{width:"60%"}})]),n("div",sa,[o(ta,{sharp:!1,height:"80px",width:"60%"}),o(ta,{height:"100%",width:"100%"})])])):(u(),c("div",H,[K,Z,o(t,{strong:"",secondary:"",onClick:s[2]||(s[2]=a=>r(e).go(-1)),style:{"margin-top":"20px"}},{default:m((()=>[h(" 返回上一级 ")])),_:1})]))}}},[["__scopeId","data-v-771eca22"]]);export{la as default};
