import{n as e,l as r,q as o,m as a,c5 as l,c6 as n,d as t,e as s,aT as i,B as d,p as c,w as u,g as v,D as m,h as p,b as h,c7 as g,i as b,a as f,M as y,N as x,O as C,_ as w,P as _,a7 as k,r as z,z as q,j as R,ag as $,U as L,W as j,aL as P,Q as D,R as B,S,c8 as M,c9 as I,a1 as E,ca as T,aM as U,bB as N,$ as O,aa as H,I as V,X as Y,Y as F,by as G,bx as Q,cb as W}from"./index.8c222edc.js";import{C as X}from"./CoverLists.f02ddca3.js";import{P as A}from"./index.7a5ed3e2.js";import{_ as J}from"./Switch.3673ae53.js";import{_ as K}from"./Space.03a5017b.js";import"./Grid.633dfea7.js";import"./get-slot.65c4337d.js";import"./Skeleton.2af31e85.js";import"./use-houdini.316adbdf.js";import"./Select.8d76d25a.js";const Z=e([r("list","\n --n-merged-border-color: var(--n-border-color);\n --n-merged-color: var(--n-color);\n --n-merged-color-hover: var(--n-color-hover);\n margin: 0;\n font-size: var(--n-font-size);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n padding: 0;\n list-style-type: none;\n color: var(--n-text-color);\n background-color: var(--n-merged-color);\n ",[o("show-divider",[r("list-item",[e("&:not(:last-child)",[a("divider","\n background-color: var(--n-merged-border-color);\n ")])])]),o("clickable",[r("list-item","\n cursor: pointer;\n ")]),o("bordered","\n border: 1px solid var(--n-merged-border-color);\n border-radius: var(--n-border-radius);\n "),o("hoverable",[r("list-item","\n border-radius: var(--n-border-radius);\n ",[e("&:hover","\n background-color: var(--n-merged-color-hover);\n ",[a("divider","\n background-color: transparent;\n ")])])]),o("bordered, hoverable",[r("list-item","\n padding: 12px 20px;\n "),a("header, footer","\n padding: 12px 20px;\n ")]),a("header, footer","\n padding: 12px 0;\n box-sizing: border-box;\n transition: border-color .3s var(--n-bezier);\n ",[e("&:not(:last-child)","\n border-bottom: 1px solid var(--n-merged-border-color);\n ")]),r("list-item","\n position: relative;\n padding: 12px 0; \n box-sizing: border-box;\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[a("prefix","\n margin-right: 20px;\n flex: 0;\n "),a("suffix","\n margin-left: 20px;\n flex: 0;\n "),a("main","\n flex: 1;\n "),a("divider","\n height: 1px;\n position: absolute;\n bottom: 0;\n left: 0;\n right: 0;\n background-color: transparent;\n transition: background-color .3s var(--n-bezier);\n pointer-events: none;\n ")])]),l(r("list","\n --n-merged-color-hover: var(--n-color-hover-modal);\n --n-merged-color: var(--n-color-modal);\n --n-merged-border-color: var(--n-border-color-modal);\n ")),n(r("list","\n --n-merged-color-hover: var(--n-color-hover-popover);\n --n-merged-color: var(--n-color-popover);\n --n-merged-border-color: var(--n-border-color-popover);\n "))]),ee=Object.assign(Object.assign({},d.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),re=h("n-list"),oe=t({name:"List",props:ee,setup(e){const{mergedClsPrefixRef:r,inlineThemeDisabled:o,mergedRtlRef:a}=s(e),l=i("List",a,r),n=d("List","-list",Z,g,e,r);c(re,{showDividerRef:u(e,"showDivider"),mergedClsPrefixRef:r});const t=v((()=>{const{common:{cubicBezierEaseInOut:e},self:{fontSize:r,textColor:o,color:a,colorModal:l,colorPopover:t,borderColor:s,borderColorModal:i,borderColorPopover:d,borderRadius:c,colorHover:u,colorHoverModal:v,colorHoverPopover:m}}=n.value;return{"--n-font-size":r,"--n-bezier":e,"--n-text-color":o,"--n-color":a,"--n-border-radius":c,"--n-border-color":s,"--n-border-color-modal":i,"--n-border-color-popover":d,"--n-color-modal":l,"--n-color-popover":t,"--n-color-hover":u,"--n-color-hover-modal":v,"--n-color-hover-popover":m}})),p=o?m("list",void 0,t,e):void 0;return{mergedClsPrefix:r,rtlEnabled:l,cssVars:o?void 0:t,themeClass:null==p?void 0:p.themeClass,onRender:null==p?void 0:p.onRender}},render(){var e;const{$slots:r,mergedClsPrefix:o,onRender:a}=this;return null==a||a(),p("ul",{class:[`${o}-list`,this.rtlEnabled&&`${o}-list--rtl`,this.bordered&&`${o}-list--bordered`,this.showDivider&&`${o}-list--show-divider`,this.hoverable&&`${o}-list--hoverable`,this.clickable&&`${o}-list--clickable`,this.themeClass],style:this.cssVars},r.header?p("div",{class:`${o}-list__header`},r.header()):null,null===(e=r.default)||void 0===e?void 0:e.call(r),r.footer?p("div",{class:`${o}-list__footer`},r.footer()):null)}}),ae=t({name:"ListItem",setup(){const e=b(re,null);return e||f("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:r}=this;return p("li",{class:`${r}-list-item`},e.prefix?p("div",{class:`${r}-list-item__prefix`},e.prefix()):null,e.default?p("div",{class:`${r}-list-item__main`},e):null,e.suffix?p("div",{class:`${r}-list-item__suffix`},e.suffix()):null,this.showDivider&&p("div",{class:`${r}-list-item__divider`}))}}),le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ne=[C("path",{d:"M9.29 6.71a.996.996 0 0 0 0 1.41L13.17 12l-3.88 3.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z",fill:"currentColor"},null,-1)],te=t({name:"ChevronRightRound",render:function(e,r){return y(),x("svg",le,ne)}}),se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ie=[C("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1),C("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1)],de=t({name:"LocalFireDepartmentRound",render:function(e,r){return y(),x("svg",se,ie)}}),ce={class:"playlists"},ue={class:"menu"},ve={key:0,class:"all-cat"},me={key:1,class:"error"},pe=w({__name:"playlists",setup(e){const r=_(),o=k();let a=z(!1),l=z(r.currentRoute.value.query.cat?r.currentRoute.value.query.cat:"全部歌单"),n=z([]),t=z(0),s=z(30),i=z(r.currentRoute.value.query.page?Number(r.currentRoute.value.query.page):1),d=z(!!r.currentRoute.value.query.hq&&"true"==r.currentRoute.value.query.hq),c=z(!0),u=z(!1);const v=e=>{n.value=[],r.push({path:"/discover/playlists",query:{cat:l.value,hq:!!e}})},m=(e="全部歌单",r=30,o=0)=>{I(e,r,o).then((e=>{t.value=e.total,n.value=[],e.playlists[0]?e.playlists.forEach((e=>{n.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:E(e.playCount)})})):$message.error("歌单列表为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))},p=(e="全部歌单",r=30)=>{let o=n.value[0]?n.value[n.value.length-1].updateTime:null;T(e,r,o).then((e=>{e.playlists[0]?(e.more?c.value=!0:c.value=!1,u.value=!1,e.playlists.forEach((e=>{n.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:E(e.playCount),updateTime:e.updateTime})}))):(c.value=!1,$message.error("精品歌单列表为空"))}))},h=e=>{n.value=[],r.push({path:"/discover/playlists",query:{cat:e,page:1}}),a.value=!1},g=e=>{s.value=e,m(l.value,e,(i.value-1)*s.value)},b=e=>{r.push({path:"/discover/playlists",query:{cat:l.value,page:e}})};return q((()=>r.currentRoute.value),(e=>{l.value=e.query.cat,d.value=!!e.query.hq&&"true"==e.query.hq,"dsc-playlists"==e.name&&(d.value?p(l.value):(i.value=e.query.page?Number(e.query.page):1,m(l.value,s.value,(i.value-1)*s.value)))})),R((()=>{o.catList.sub&&o.highqualityCatList[0]||(M().then((e=>{200==e.code?o.catList=e:$message.error("歌单分类获取失败")})),M(!0).then((e=>{200==e.code?o.highqualityCatList=e.tags:$message.error("精品歌单分类获取失败")}))),d.value?p(l.value):m(l.value,s.value,(i.value-1)*s.value)})),(e,r)=>{const s=$,i=U,m=G,f=Q,w=K,_=ae,k=oe,z=W,q=N,R=J;return y(),x("div",ce,[C("div",ue,[L(i,{strong:"",secondary:"",class:"cat","icon-placement":"right",round:"",onClick:r[0]||(r[0]=e=>P(a)?a.value=!0:a=!0)},{icon:j((()=>[L(s,{class:"up",component:D(te)},null,8,["component"])])),default:j((()=>[O(" "+H(D(l)),1)])),_:1}),L(q,{class:"cat-model",show:D(a),"onUpdate:show":r[2]||(r[2]=e=>P(a)?a.value=e:a=e),style:{width:"60vw","min-width":"min(24rem, 100vw)"},preset:"card",title:"歌单分类",bordered:!1},{header:j((()=>[O(" 歌单分类 "),L(m,{round:"",class:"tag",type:"全部歌单"==D(l)?"primary":"default",style:V({marginLeft:"12px",fontSize:"12px",transform:"translateY(-2px)"}),bordered:!1,onClick:r[1]||(r[1]=e=>h("全部歌单"))},{default:j((()=>[O(" 全部歌单 ")])),_:1},8,["type","style"])])),default:j((()=>[L(z,{style:{"max-height":"80vh"}},{default:j((()=>[D(o).catList.sub&&D(o).catList.sub[0]?(y(),x("div",ve,[L(k,null,{default:j((()=>[(y(!0),x(Y,null,F(D(o).catList.categories,((e,r)=>(y(),B(_,{key:e},{prefix:j((()=>[L(f,{class:"type"},{default:j((()=>[O(H(e),1)])),_:2},1024)])),default:j((()=>[L(w,null,{default:j((()=>[(y(!0),x(Y,null,F(D(o).catList.sub.filter((e=>e.category==r)),(e=>(y(),B(m,{round:"",class:"tag",size:"large",key:e,bordered:!1,type:e.name==D(l)?"primary":"default",onClick:r=>h(e.name)},{icon:j((()=>[e.hot?(y(),B(s,{key:0,class:"icon",component:D(de)},null,8,["component"])):S("",!0)])),default:j((()=>[O(H(e.name)+" ",1)])),_:2},1032,["type","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(y(),x("div",me,"分类数据获取失败"))])),_:1})])),_:1},8,["show"]),(M=D(o).highqualityCatList,I=D(l),"全部歌单"==I||M.some((e=>e.name==I))?(y(),B(w,{key:0,align:"center"},{default:j((()=>[L(f,null,{default:j((()=>[O("精品歌单")])),_:1}),L(R,{value:D(d),"onUpdate:value":[r[3]||(r[3]=e=>P(d)?d.value=e:d=e),v],round:!1},null,8,["value"])])),_:1})):S("",!0))]),L(X,{listData:D(n)},null,8,["listData"]),D(n)[0]&&!D(d)?(y(),B(A,{key:0,totalCount:D(t),onPageSizeChange:g,onPageNumberChange:b},null,8,["totalCount"])):S("",!0),L(w,{justify:"center"},{default:j((()=>[D(d)&&D(c)?(y(),B(i,{key:0,class:"more",size:"large",strong:"",secondary:"",round:"",loading:D(u),onClick:r[4]||(r[4]=()=>{P(u)?u.value=!0:u=!0,p(D(l))})},{default:j((()=>[O(" 加载更多 ")])),_:1},8,["loading"])):S("",!0)])),_:1})]);var M,I}}},[["__scopeId","data-v-b8bd886e"]]);export{pe as default};
