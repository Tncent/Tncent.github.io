import{_ as a,P as s,a7 as e,r as l,j as t,z as n,ag as i,Q as r,M as o,N as c,O as d,U as u,R as m,S as p,W as v,ab as f,aQ as h,cw as y,a1 as g,as as b,bx as _,aM as k,$ as M,a4 as T,ar as j,bu as L}from"./index.8c222edc.js";import{C}from"./CoverLists.f02ddca3.js";import{V as H}from"./VideocamRound.869967cd.js";import{a as x}from"./headers.9774b89e.js";import{_ as D}from"./Divider.0423ec28.js";import"./Grid.633dfea7.js";import"./get-slot.65c4337d.js";import"./Skeleton.2af31e85.js";import"./use-houdini.316adbdf.js";const $={key:0,class:"song"},P={class:"detail"},R={class:"pic"},S={class:"right"},U={class:"intr"},V={class:"all-artist"},I={class:"album"},q={key:1,class:"time"},w={class:"button"},Q={key:0,class:"simiPlayList"},z=a({__name:"SongView",setup(a){const z=s(),E=e();let F=l(z.currentRoute.value.query.id),G=l(null),N=l([]);const O=a=>{h(a).then((s=>{s.songs[0]?(G.value=s.songs[0],W(a)):$message.error("歌曲信息获取失败")}))},W=a=>{y(a).then((a=>{N.value=[],a.playlists.forEach((a=>{N.value.push({id:a.id,cover:a.coverImgUrl,name:a.name,artist:a.creator,playCount:g(a.playCount)})}))}))};return t((()=>{F.value&&O(F.value)})),n((()=>z.currentRoute.value),(a=>{F.value=a.query.id,"song"==a.name&&O(F.value)})),(a,s)=>{const e=b,l=_,t=i,n=k,h=D,y=x;return r(G)?(o(),c("div",$,[d("div",P,[d("div",R,[u(e,{class:"coverImg",src:r(G).al.picUrl?r(G).al.picUrl.replace(/^http:/,"https:")+"?param=500y500":null,"fallback-src":"/images/pic/default.png"},null,8,["src"])]),d("div",S,[d("div",U,[u(l,{class:"name text-hidden",innerHTML:r(G).name},null,8,["innerHTML"]),r(G).alia[0]?(o(),m(l,{key:0,depth:"3",class:"alia",innerHTML:r(G).alia[0]},null,8,["innerHTML"])):p("",!0),d("div",V,[u(l,{class:"tip",depth:"3"},{default:v((()=>[M("歌手：")])),_:1}),r(G).ar?(o(),m(f,{key:0,artistsData:r(G).ar},null,8,["artistsData"])):p("",!0)]),d("div",I,[u(l,{class:"tip",depth:"3"},{default:v((()=>[M("专辑：")])),_:1}),u(l,{class:"text",innerHTML:r(G).al.name,onClick:s[0]||(s[0]=a=>r(z).push(`/album?id=${r(G).al.id}`))},null,8,["innerHTML"])]),r(G).publishTime?(o(),c("div",q,[u(l,{class:"tip",depth:"3"},{default:v((()=>[M("发行日期：")])),_:1}),u(l,{class:"text",innerHTML:r(T)(r(G).publishTime)},null,8,["innerHTML"])])):p("",!0)]),d("div",w,[u(n,{type:"primary",strong:"",secondary:"",onClick:s[1]||(s[1]=a=>(a=>{let s={album:a.al,artist:a.ar,fee:a.fee,id:a.id,name:a.name};E.setPersonalFmMode(!1),E.addSongToPlaylists(s)})(r(G)))},{icon:v((()=>[u(t,{component:r(j)},null,8,["component"])])),default:v((()=>[M(" 播放 ")])),_:1}),u(n,{strong:"",secondary:"",onClick:s[2]||(s[2]=a=>r(z).push(`/comment?id=${r(G).id}`))},{icon:v((()=>[u(t,{component:r(L)},null,8,["component"])])),default:v((()=>[M(" 评论 ")])),_:1}),r(G).mv?(o(),m(n,{key:0,strong:"",secondary:"",onClick:s[3]||(s[3]=a=>r(z).push(`/video?id=${r(G).mv}`))},{icon:v((()=>[u(t,{component:r(H)},null,8,["component"])])),default:v((()=>[M(" MV ")])),_:1})):p("",!0)])])]),u(h),r(N)[0]?(o(),c("div",Q,[u(y,{prefix:"bar"},{default:v((()=>[M(" 包含这首歌的歌单 ")])),_:1}),u(C,{listData:r(N)},null,8,["listData"])])):p("",!0)])):p("",!0)}}},[["__scopeId","data-v-a7eed118"]]);export{z as default};
