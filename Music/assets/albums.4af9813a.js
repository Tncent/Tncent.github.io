import{P as e,r as a,z as u,j as s,M as t,N as l,U as r,Q as o,R as n,S as m,aP as i,a4 as v}from"./index.8c222edc.js";import{C as d}from"./CoverLists.f02ddca3.js";import{P as p}from"./index.7a5ed3e2.js";import"./Grid.633dfea7.js";import"./get-slot.65c4337d.js";import"./Skeleton.2af31e85.js";import"./use-houdini.316adbdf.js";import"./Select.8d76d25a.js";const c={class:"albums"},b={__name:"albums",setup(b){const h=e();let y=a(h.currentRoute.value.query.keywords),g=a([]),f=a(0),j=a(30),C=a(h.currentRoute.value.query.page?Number(h.currentRoute.value.query.page):1);const q=(e,a=30,u=0,s=10)=>{i(e,a,u,s).then((e=>{f.value=e.result.albumCount,g.value=[],e.result.albums?e.result.albums.forEach((e=>{g.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:v(e.publishTime)})})):$message.error("搜索内容为空"),$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};u((()=>h.currentRoute.value),(e=>{y.value=e.query.keywords,C.value=Number(e.query.page),"s-albums"==e.name&&q(y.value,j.value,(C.value-1)*j.value)}));const k=e=>{j.value=e,q(y.value,e,(C.value-1)*j.value)},P=e=>{h.push({path:"/search/albums",query:{keywords:y.value,page:e}})};return s((()=>{q(y.value,j.value,(C.value-1)*j.value)})),(e,a)=>(t(),l("div",c,[r(d,{listData:o(g),listType:"album"},null,8,["listData"]),o(g)[0]?(t(),n(p,{key:0,totalCount:o(f),onPageSizeChange:k,onPageNumberChange:P},null,8,["totalCount"])):m("",!0)]))}};export{b as default};
