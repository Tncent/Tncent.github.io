import{P as e,r as a,z as s,j as t,M as u,N as l,U as o,Q as r,R as n,S as m,aP as v,aQ as i,aR as c}from"./index.8c222edc.js";import{D as p}from"./DataLists.a1af9741.js";import{P as g}from"./index.7a5ed3e2.js";import"./SmallSongData.246ff741.js";import"./Add.055214c0.js";import"./Space.03a5017b.js";import"./get-slot.65c4337d.js";import"./Select.8d76d25a.js";const d={class:"songs"},f={__name:"songs",setup(f){const h=e();let j=a(h.currentRoute.value.query.keywords),y=a([]),C=a(0),b=a(30),q=a(h.currentRoute.value.query.page?Number(h.currentRoute.value.query.page):1);const R=(e,a=30,s=0,t=1)=>{v(e,a,s,t).then((e=>{if(C.value=e.result.songCount,e.result.songs){const a=e.result.songs.map((e=>e.id));i(a.join(",")).then((e=>{y.value=[],e.songs.forEach(((e,a)=>{y.value.push({id:e.id,num:a+1+(q.value-1)*b.value,name:e.name,artist:e.ar,album:e.al,alia:e.alia,time:c(e.dt),fee:e.fee,pc:e.pc?e.pc:null,mv:e.mv})}))}))}else $message.error("搜索内容为空");$mainContent&&$mainContent.scrollIntoView({behavior:"smooth"})}))};s((()=>h.currentRoute.value),(e=>{j.value=e.query.keywords,q.value=Number(e.query.page),"s-songs"==e.name&&R(j.value,b.value,q.value?(q.value-1)*b.value:0)}));const S=e=>{b.value=e,R(j.value,e,(q.value-1)*b.value)},D=e=>{h.push({path:"/search/songs",query:{keywords:j.value,page:e}})};return t((()=>{R(j.value,b.value,(q.value-1)*b.value)})),(e,a)=>(u(),l("div",d,[o(p,{listData:r(y)},null,8,["listData"]),r(y)[0]?(u(),n(g,{key:0,totalCount:r(C),onPageSizeChange:S,onPageNumberChange:D},null,8,["totalCount"])):m("",!0)]))}};export{f as default};
